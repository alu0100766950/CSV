"use strict";function calculate(){var e,a=document.getElementById("original"),l=a.value,t=/\s*"((?:[^"\\]|\\.)*)"\s*,?|\s*([^,]+),?|\s*,/g,n=l.split(/\n+\s*/),o=0/0,r=[],i="<% _.each(items, function(name) { %>                <td><%= name %></td>                           <% }); %>";window.localStorage&&(localStorage.original=l);for(var c in n){var l=n[c],s=l.match(t),e=[],u=!1;if(s){o&&o!=s.length?u=!0:(o=s.length,u=!1);for(var g in s){var d=s[g].replace(/,\s*$/,""),m=d.replace(/^\s*"/,""),f=m.replace(/"\s*$/,""),p=f.replace(/\"/,'"');e.push(p)}var h=u?'<tr class="error">':"<tr>";r.push(h+_.template(i,{items:e})+"</tr>")}else alert("ERROR! row "+l+" does not look as legal CSV"),u=!0}r.unshift('<p>\n<table class="center" id="result">'),r.push("</table>"),finaltable.innerHTML=r.join("\n")}$(document).ready(function(){$("button").click(function(){calculate()})}),window.onload=function(){window.localStorage&&localStorage.original&&(document.getElementById("original").value=localStorage.original)};